<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:vm="using:dlapp.ViewModels"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        mc:Ignorable="d" d:DesignWidth="500" d:DesignHeight="350"
        x:Class="dlapp.Views.MainWindow"
        x:DataType="vm:MainWindowViewModel"
        Icon="/Assets/avalonia-logo.ico"
        Title="DL App"
        Width="800" Height="500"
        WindowStartupLocation="CenterScreen"
        CanResize="False"
        ExtendClientAreaToDecorationsHint="True">

    <Design.DataContext>
        <vm:MainWindowViewModel/>
    </Design.DataContext>

    <Panel>
        <Panel.Background>
            <LinearGradientBrush StartPoint="0%,0%" EndPoint="100%,100%">
                <GradientStop Offset="0" Color="#0F0F12"/>
                <GradientStop Offset="1" Color="#1B1B22"/>
            </LinearGradientBrush>
        </Panel.Background>

        <Grid ColumnDefinitions="250,*">
            
            <!-- Left Panel: Branding -->
            <Border Grid.Column="0" Background="#08080A" BorderBrush="#222222" BorderThickness="0,0,1,0">
                <Grid RowDefinitions="*,Auto" Margin="30">
                    <StackPanel VerticalAlignment="Center" Spacing="0">
                        <TextBlock Text="YOUTUBE" 
                                   FontSize="28" 
                                   FontWeight="Heavy" 
                                   Foreground="White"
                                   LetterSpacing="2"/>
                        <TextBlock Text="DL" 
                                   FontSize="72" 
                                   FontWeight="Black" 
                                   Foreground="#CCFF00"
                                   LineHeight="60"
                                   Margin="-4,-10,0,0"/>
                        <TextBlock Text="APP" 
                                   FontSize="72" 
                                   FontWeight="Black" 
                                   Foreground="#333333"
                                   LineHeight="60"
                                   Margin="-4,-20,0,0"/>
                    </StackPanel>
                    
                    <TextBlock Grid.Row="1" 
                               Text="v1.0.0" 
                               FontSize="12" 
                               Foreground="#444444"
                               FontFamily="Consolas"/>
                </Grid>
            </Border>

            <!-- Right Panel: Controls -->
            <Grid Grid.Column="1" RowDefinitions="*,Auto" Margin="40">
                <StackPanel Spacing="20" VerticalAlignment="Center">
                    
                    <!-- URL Input -->
                    <StackPanel Spacing="8">
                        <TextBlock Text="TARGET URL" FontSize="10" FontWeight="Bold" Foreground="#666666" LetterSpacing="1"/>
                        <TextBox Text="{Binding Url}" 
                                 Watermark="https://youtube.com/watch?v=..." 
                                 UseFloatingWatermark="False"
                                 IsEnabled="{Binding !IsBusy}"/>
                    </StackPanel>

                    <!-- Save Path Input -->
                    <StackPanel Spacing="8">
                        <TextBlock Text="OUTPUT DIRECTORY" FontSize="10" FontWeight="Bold" Foreground="#666666" LetterSpacing="1"/>
                        <Grid ColumnDefinitions="*, Auto">
                            <TextBox Text="{Binding SavePath}" 
                                     IsReadOnly="True" 
                                     Watermark="Select folder..."
                                     IsEnabled="{Binding !IsBusy}"/>
                            <Button Grid.Column="1" 
                                    Classes="secondary"
                                    Content="..." 
                                    Command="{Binding SelectSavePathCommand}"
                                    Margin="10,0,0,0"
                                    IsEnabled="{Binding !IsBusy}"/>
                        </Grid>
                    </StackPanel>

                    <!-- Format Selection -->
                    <StackPanel Orientation="Horizontal" Spacing="20" Margin="0,10">
                        <RadioButton GroupName="Format" Content="VIDEO + AUDIO" 
                                     IsChecked="{Binding !IsAudioOnly}"
                                     IsEnabled="{Binding !IsBusy}"/>
                        <RadioButton GroupName="Format" Content="AUDIO ONLY" 
                                     IsChecked="{Binding IsAudioOnly}"
                                     IsEnabled="{Binding !IsBusy}"/>
                    </StackPanel>

                    <!-- Action Button -->
                    <Button Classes="primary"
                            Content="INITIATE DOWNLOAD" 
                            Command="{Binding DownloadCommand}"
                            HorizontalAlignment="Stretch" 
                            HorizontalContentAlignment="Center"
                            IsEnabled="{Binding !IsBusy}"/>
                </StackPanel>

                <!-- Status Overlay / Bottom Bar -->
                <StackPanel Grid.Row="1" Spacing="10" VerticalAlignment="Bottom">
                    <ProgressBar Value="{Binding ProgressValue}" 
                                 Maximum="100" 
                                 Height="2"
                                 IsVisible="{Binding IsBusy}"/>
                    
                    <TextBlock Text="{Binding StatusMessage}" 
                               FontSize="11" 
                               Foreground="#888888" 
                               HorizontalAlignment="Center"
                               TextTrimming="CharacterEllipsis"/>
                </StackPanel>
            </Grid>
        </Grid>
    </Panel>
</Window>
